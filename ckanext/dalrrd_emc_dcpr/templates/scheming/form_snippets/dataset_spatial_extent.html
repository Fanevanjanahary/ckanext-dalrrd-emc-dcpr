{% import "macros/form.html"  as form %}

{% asset "dalrrd-emc-dcpr/dataset-spatial-extent-map-js" %}
{% asset "dalrrd-emc-dcpr/dataset-spatial-extent-map-css" %}

{% set map_config = h.get_common_map_config() %}
{% set default_extent = h.dalrrd_emc_dcpr_default_spatial_search_extent() %}


{% call form.input_block(field.field_name, h.scheming_language_text(field.label), is_required=h.scheming_field_required(field)) %}
    <div
            class="dataset-spatial-extent-map"
            data-module="emcDatasetSpatialExtentMap"
            data-module-map-config="{{ h.dump_json(map_config) }}"
            data-module-default-extent="{{ default_extent }}"
    >
        <div id="dataset-spatial-extent-map-container"></div>
        <div id="dataset-spatial-extent-map-attribution">
            {% snippet "spatial/snippets/map_attribution.html", map_config=map_config %}
        </div>
    </div>
    <input id="field-{{ field.name }}" type="text" name="{{ name }}" value="{{ value | empty_and_escape }}" />
    {%- snippet 'scheming/form_snippets/help_text.html', field=field -%}
{% endcall %}
